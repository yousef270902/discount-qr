<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Admin - QR Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
</head>

<body class="bg-light p-4">

<div class="container">
<h3 class="mb-3">ğŸ› ï¸ ØªÙˆÙ„ÙŠØ¯ QR Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>

<div class="card p-3 mb-4">
    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
    <input id="pname" class="form-control mb-2" placeholder="Ù…Ø«Ø§Ù„: ØªÙŠØ´ÙŠØ±Øª">

    <label>Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… (%)</label>
    <input id="pdiscount" type="number" class="form-control mb-3" placeholder="Ù…Ø«Ø§Ù„: 25">

    <button class="btn btn-success w-100" onclick="generate()">ØªÙˆÙ„ÙŠØ¯ QR</button>
</div>

<div class="card p-3 text-center">
    <div id="qrcode"></div>
    <button class="btn btn-secondary mt-3" onclick="downloadQR()">â¬‡ï¸ ØªØ­Ù…ÙŠÙ„ QR</button>
</div>
</div>

<script>
let qr;

function generate(){
    document.getElementById("qrcode").innerHTML = "";
    const name = encodeURIComponent(pname.value);
    const discount = pdiscount.value;

    const link = `product.svg?name=${name}&discount=${discount}`;

    qr = new QRCode(document.getElementById("qrcode"), {
        text: link,
        width: 200,
        height: 200
    });
}

function downloadQR(){
    const img = document.querySelector("#qrcode img");
    if(!img) return;

    const a = document.createElement("a");
    a.href = img.src;
    a.download = "product_qr.png";
    a.click();
}
</script>

</body>
</html>
