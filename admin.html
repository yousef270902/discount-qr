<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
<style>
body { background: #f8f9fa; font-family: Arial, sans-serif; }
.card { border-radius: 15px; }
.download-btn { margin-left: 5px; }
.qr-cell { width: 130px; }
</style>
</head>

<body>
<div class="container py-4">
    <h2 class="mb-4 text-center">ğŸ› ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
    <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
    <div class="card p-3 shadow-sm">
        <h5>ğŸ“¦ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h5>
        <table class="table table-bordered table-striped align-middle mb-0">
            <thead class="table-dark">
                <tr>
                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                    <th>Ø§Ù„Ø³Ø¹Ø±</th>
                    <th>QR Code</th>
                    <th>ØªØ­Ù…ÙŠÙ„ QR</th>
                    <th>Ø­Ø°Ù</th>
                </tr>
            </thead>
            <tbody id="productsTable"></tbody>
        </table>
    </div>
</div>

<script src="data.js"></script>
<script>
let products = {...window.APP_DATA.products}; // Ù†Ø³Ø® Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

function render() {
    const table = document.getElementById("productsTable");
    table.innerHTML = "";

    for (let id in products) {
        const p = products[id];

        const tr = document.createElement("tr");

        tr.innerHTML = `
            <td>${p.name}</td>
            <td>${p.price} Ø¬Ù†ÙŠÙ‡</td>
            <td class="qr-cell" id="qr${id}"></td>
            <td>
                <button class="btn btn-sm btn-secondary download-btn" onclick="downloadQR(${id})">â¬‡ï¸ ØªØ­Ù…ÙŠÙ„</button>
            </td>
            <td>
                <button class="btn btn-sm btn-danger" onclick="del(${id})">Ø­Ø°Ù</button>
            </td>
        `;

        table.appendChild(tr);

        // ØªÙˆÙ„ÙŠØ¯ QR
        new QRCode(document.getElementById("qr"+id), {
            text: "https://yousef270902.github.io/discount-qr/discount.html?product=" + id,
            width: 30,
            height: 30
        });
    }
}



function downloadQR(id) {
    const qrImg = document.getElementById("qr"+id).querySelector("img");
    if(qrImg){
        const link = document.createElement("a");
        link.href = qrImg.src;
        link.download = products[id].name + "_QR.png";
        link.click();
    }
}
render();
</script>
</body>
</html>





